<!DOCTYPE html>
<html lang="es">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
	<title>QuieroConTic</title>
	<style type="text/css">
		@import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
		@import url('https://fonts.googleapis.com/css?family=Pacifico');
		@import url('https://fonts.googleapis.com/css?family=Love+Ya+Like+A+Sister');
		*{padding: 0; margin: 0; box-sizing: border-box; border: 0;}
		body{
			background-image: url('img/fondo.jpg');
		}
		#lienzo{
			width: 731px; 
			height: 411px; 
			border: 2px solid white; 
			user-select: none; 
			overflow: hidden;
			background-image: url('img/fondo.jpg');
			background-size: 100% 100%;
		}
		#btnfs{
			width: 25px;
			height: 25px;
			background-image: url('img/btnfs.png');
			background-size: 100% 100%;
			position: absolute;
			right: 5px; top: 5px;
			cursor: pointer;
			z-index: 10;
		}
		.page{
			width: 100%;
			height: 100%;
			position: absolute;
			top: 0; left: 0;
			display: none;
		}
		#page1{
			display: flex;
			justify-content: center;
			align-items: center;
		}
		.grupo{
			text-align: center;
		}
		#page1 .grupo .logo{
			width: 400px;
			aspect-ratio: 997/215;
			background-image: url('img/nombre.png');
			background-size: 100% 100%;
		}
		.loading{
			color: white;
			font-size: 25px;
			font-style: italic;
			margin-top: 10px;
			font-family: Love Ya Like A Sister;
		}

		#page2 .logo{
			width: 150px;
			aspect-ratio: 997/215;
			margin-top: 20px;
			margin-left: 20px;
			background-image: url('img/nombre.png');
			background-size: 100% 100%;
		}
		#page2 .desc{
			margin-top: -8px;
			margin-left: 30px;
			color: white;
			font-family: Poppins;
		}
		#zonas{
			display: flex;
			border: 0px solid black;
			height: 210px;
			justify-content: center;
			align-items: center;
		}
		#img1{
			width: 130px;
			aspect-ratio: 1/1;
		}
		#zonaPalabras{
			border: 0px solid dimgray;
			display: flex;
			align-items: center;
			padding-left: 10px;
		}
		#zonaSilabas{
			border-top: 1px solid darkgray;
			width: 100%;
			height: 100px;
			display: flex;
			justify-content: center;
			align-items: flex-start;
			padding-top: 35px;
			margin-top: -25px;
		}
		.silaba{
			border: 2px solid black;
			width: 60px;
			aspect-ratio: 1/1;
			background-color: white;
			display: flex;
			justify-content: center;
			align-items: center;
			font-family: Poppins;
			font-weight: bold;
			font-size: 22px;
			border-radius: 5px;
			cursor: pointer;
			margin-left: 10px;
			position: relative;
		}
		.sinmargin{
			margin-left: 0px;
		}
		#grupo1{
			display: flex;
			justify-content: center;
		}
		#btnaudio{
			width: 50px;
			aspect-ratio: 1/1;
			background-color: white;
			border-radius: 50%;
			background-image: url('img/btnaudio.png');
			background-size: 100% 100%;
			cursor: pointer;
			position: relative;
			z-index: 10;
			margin-right: 10px;
		}
		#visto{
			width: 50px;
			aspect-ratio: 1/1;
			background-color: white;
			border-radius: 50%;
			background-image: url('img/visto.png');
			background-size: 100% 100%;
			cursor: pointer;
			position: relative;
			z-index: 10;
		}

		#page3 .logo{
			width: 400px;
			aspect-ratio: 997/215;
			margin: 0 auto;
			margin-top: 30px;
			background-image: url('img/nombre.png');
			background-size: 100% 100%;
		}

		#page3 .desc{
			text-align: center;
			margin-top: -15px;
			color: white;
			font-size: 18px;
			font-family: Poppins;
		}
		.resultado{
			display: flex;
			justify-content: center;
			align-items: center;
			margin-top: 30px;
		}
		.cantidad{
			text-align: center;
			font-family: Love Ya Like A Sister;
			color: white;
		}
		.cantidad .numero{
			font-size: 60px;
		}
		.medalla{
			width: 200px;
			aspect-ratio: 1/1;
			background-image: url('img/medalla.png');
			background-size: 100% 100%;
		}
		.btncerrar{
			position: absolute;
			width: 15px; height: 15px;
			background-image: url('img/cerrar.png');
			background-size: 100% 100%;
			top: 0; right: 0;
		}
	</style>
</head>
<body>
	<div id="lienzo">
		<div id="btnfs" fs="false"></div>

		<div class="page" id="page1">
			<div class="grupo">
				<div class="logo"></div>
				<div class="loading">Loading...</div>
			</div>
		</div>

		<div class="page" id="page2">
			<div class="logo"></div>
			<div class="desc">Reproduce el audio y construye la palabra</div>
			<div id="zonas">
				<img id="img1" src="img/pregunta.png">
				<div id="zonaPalabras">
					<!--
					<div class="silaba sinmargin">ma</div>
					<div class="silaba sinmargin">ma</div>
					|-->
				</div>
			</div>
			<div id="grupo1">
				<div id="btnaudio"></div>
				<div id="visto"></div>
			</div>
			<div id="zonaSilabas">
				<!--
				<div class="silaba">mi</div>
				<div class="silaba">mo</div>
				<div class="silaba">má</div>
				<div class="silaba">a</div>
				<div class="silaba">o</div>
				-->
			</div>
		</div>
		
		<div class="page" id="page3">
			<div class="logo"></div>
			<div class="desc">- Resultados de la actividad: Palabras con M -</div>
			<div class="resultado">
				<div class="medalla"></div>
				<div class="cantidad">
					<div class="txt">ACIERTOS:</div>
					<div class="numero">100%</div>
				</div>
			</div>
		</div>
	
	</div>

	<script type="text/javascript" src="js/escalarCentrar.js"></script>
	<script type="text/javascript" src="js/preload.js"></script>
	<script type="text/javascript" src="js/fullscreen.js"></script>

	<script type="text/javascript" id="varPreload">
		const banco_videos=[];
		const banco_sonidos=['sound/ama.mp3','sound/amo.mp3','sound/bien.mp3','sound/ema.mp3','sound/intentalo.mp3','sound/mamá.mp3','sound/mami.mp3','sound/meme.mp3','sound/memo.mp3','sound/mía.mp3','sound/mimo.mp3','sound/mío.mp3'];
		const banco_imagenes=['img/fondo.jpg','img/btnfs.png','img/btnfs2.png','img/nombre.png','img/btnaudio.png','img/medalla.png','img/btnpause.png','img/cerrar.png','img/pregunta.png','img/visto.png'];
		function contarElementosCargados(){
			if(totalAudios===banco_sonidos.length && totalImagenes===banco_imagenes.length && totalVideos===banco_videos.length){
				setTimeout(function(){
					document.querySelector("#page1").style.display="none";
					document.querySelector("#page2").style.display="block";
				},1000);
			}
		}
	</script>
	<script type="text/javascript">
		let indice=0;
		let palabra="";
		let fallos=0;
		let ejer=[
			{
				'palabra':'mamá',
				'silabas': 'ma má mi mo mu me',
				'imagen':'mamá.jpg'
			},
			{
				'palabra':'ama',
				'silabas':'a ma o mi me mo',
				'imagen':'ama.jpg'
			},
			{
				'palabra':'mimo',
				'silabas':'ma mi me mo mu',
				'imagen':'mimo.jpg'
			},
			{
				'palabra':'meme',
				'silabas':'ma mi me mo mu',
				'imagen':'meme.jpg'
			},
			{
				'palabra':'amo',
				'silabas':'a ma o mi me mo',
				'imagen':'amo.jpg'
			},
			{
				'palabra':'mía',
				'silabas':'a ma o mi mí mo',
				'imagen':''
			},
			{
				'palabra':'mío',
				'silabas':'a ma o mi mí mo',
				'imagen':''
			},
			{
				'palabra':'mami',
				'silabas':'me ma mi mu mo',
				'imagen':'mami.jpg'
			},
			{
				'palabra':'memo',
				'silabas':'me ma mi mu mo',
				'imagen':''
			},
			{
				'palabra':'ema',
				'silabas':'e ma o me i mo',
				'imagen':'ema.jpg'
			}
		];

		function desordenarArray(array) {array.sort(() => Math.random() - 0.5);}
		function mostrarEjercicio(){
			if(ejer[indice]){
				let e=ejer[indice];
				palabra=e.palabra;
				let silabas=e.silabas.split(" ");
				desordenarArray(silabas);
				colocarSilabas(silabas);
			}else{
				console.log("termino");
				document.querySelector("#page2").style.display="none";
				document.querySelector("#page3").style.display="block";
			}
		}
		function colocarSilabas(silabas){
			let zonaSilabas=document.querySelector("#zonaSilabas");
			silabas.forEach(function(item){
				let silaba=`<div class="silaba">${item}</div>`;
				zonaSilabas.insertAdjacentHTML('beforeend',silaba);
			});
		}
		function eventosBotonAudio(){
			let botonAudio=document.querySelector("#btnaudio");
			botonAudio.addEventListener('click',function(){
				if(palabra!==""){
					let sonido=document.getElementById(palabra);
					//sonido.setAttribute('playbackRate',0.1);
					sonido.playbackRate=0.8;
					sonido.play();
				}
			});
		}
		function eventosSilabas(){
			let silabas=document.querySelectorAll(".silaba");
			silabas.forEach(function(item){
				item.addEventListener("click",function(){
					let zona=document.querySelector("#zonaPalabras");
					let s=`<div class="silaba sinmargin">${this.textContent}<div class='btncerrar'></div></div>`;
					zona.insertAdjacentHTML('beforeend',s);
					agregarEventoBotonEliminar();
				});
			});
		}
		function agregarEventoBotonEliminar(){
			let zona=document.querySelector("#zonaPalabras");
			let cantidad=zona.children.length;
			let ulthijo=zona.children[cantidad-1];
			let btn=ulthijo.querySelector(".btncerrar");
			btn.addEventListener('click',function(){
				this.parentNode.remove();
			});
		}
		function eventosBotonVisto(){
			let btn=document.querySelector("#visto");
			btn.addEventListener('click',function(){
				let zona=document.querySelector("#zonaPalabras");
				let silabas=zona.querySelectorAll('.silaba');
				let union="";
				silabas.forEach(function(item){
					union=union+item.textContent;
				});
				if(union===palabra){
					document.querySelector("#bien").play();
					//mostrarImagen
					setTimeout(function(){
						limpiarZonas();
						indice++;
						palabra="";
						mostrarEjercicio();
						aplicarEventos();
					},2000);
				}else{
					fallos++;
					document.querySelector("#intentalo").play();
					//efecto de no sobre las silabas
				}
			});
		}
		function limpiarZonas(){
			let zona1=document.querySelector("#zonaPalabras");
			let zona2=document.querySelector("#zonaSilabas");
			let img=document.querySelector("#img1");
			zona1.innerHTML="";
			zona2.innerHTML="";
			img.setAttribute("src","img/pregunta.png");
		}
		function aplicarEventos(){
			eventosBotonAudio();
			eventosSilabas();
		}
	</script>
	
	<script type="text/javascript">
		window.onload=function(){
			activarPrecargas();
			agregarEventoFullScreen();
			desordenarArray(ejer);
			mostrarEjercicio();
			aplicarEventos();
			eventosBotonVisto();
		}
	</script>
</body>
</html>